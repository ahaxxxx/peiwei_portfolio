const translations = {
  en: {
    meta: {
      title: "MahamCodes | Portfolio"
    },
    controls: {
      langToggle: "中文",
      themeToDark: "Dark Mode",
      themeToLight: "Light Mode"
    },
    hero: {
      brand: "MahamCodes",
      kicker: "Personal Portfolio",
      title: "Clara Tan Pei Wei",
      subtitle: "Biological Sciences graduate with hands-on exposure to international business development in IVD/POCT healthcare markets."
    },
    personal: {
      title: "Personal Information",
      items: [
        { label: "Name", value: "Clara Tan Pei Wei" },
        { label: "Gender", value: "Female" },
        { label: "Nationality", value: "Malaysia" },
        { label: "Institution", value: "Tianjin University (China)" },
        { label: "Education", value: "Bachelor's Degree" },
        { label: "Major", value: "Biological Science" }
      ]
    },
    about: {
      title: "About Me",
      summary: "Biological Sciences graduate with academic training in China and practical exposure to the IVD/POCT industry. Experienced in Chinese medical enterprise operations, local market dynamics, and cross-functional communication. Skilled in visual content creation and professional documentation using Microsoft Word and PowerPoint. Aspiring to contribute to healthcare product development and lifecycle management."
    },
    experience: {
      title: "Working Experience",
      items: [
        {
          title: "Xenta Biomedical Science Co. Ltd.",
          subtitle: "International Business Development | China",
          period: "Jul 2025 - Jan 2026",
          bullets: [
            "Supported early-stage overseas market development across Malaysia, Indonesia, Korea, and Japan.",
            "Conducted independent field visits to hospitals and local distributors during a two-month assignment in Malaysia.",
            "Assisted in customer development, distributor communication, and follow-up on product inquiries and documentation.",
            "Participated in international exhibitions and overseas business activities in Indonesia and South Korea, including coordination with Japanese partners.",
            "Supported international shipment and logistics coordination for sample delivery and trade documentation to Indonesia."
          ]
        }
      ]
    },
    education: {
      title: "Education",
      items: [
        {
          title: "Tianjin University",
          subtitle: "Bachelor of Biological Science | China",
          period: "Sep 2021 - Jul 2025",
          bullets: [
            "Full Scholarship Awardee (4 years).",
            "Major courses: General Biology, Biochemistry, Cell Biology, Virology, Physiology, Genetics, Microbiology, Biotechnology.",
            "Electives: Technological Entrepreneurship and Product Innovation, Financial Accounting Data Interpretation, Sustainable Social Entrepreneurship, Engineering Project Investment and Financing."
          ]
        }
      ]
    },
    activities: {
      title: "Extracurricular Experience",
      items: [
        {
          title: "iGEM 2024 - International Genetically Engineered Machine Competition",
          subtitle: "Experimental Team Member | School of Life Sciences | Tianjin University",
          period: "2024 - 2025",
          bullets: [
            "Participated in experimental design and wet-lab execution for a PET plastic biodegradation project.",
            "Focused on construction and optimization of an ICCG enzyme expression system.",
            "Performed 500+ sample tests through multiple engineering cycles using high-throughput screening.",
            "Team received iGEM Gold Medal and Best Improved Part Nomination."
          ]
        },
        {
          title: "Malaysian Student Association in Tianjin (MSAT)",
          subtitle: "Vice President",
          period: "2023 - 2024",
          bullets: [
            "Led and coordinated an organization of 300+ Malaysian students across multiple universities.",
            "Planned and executed 10 large-scale events, including official briefings and delegation meetings.",
            "Served as primary contact for Malaysia-China student engagement activities.",
            "Designed standardized workflows, approval procedures, and communication templates.",
            "Achieved 85% event participation and 20% year-on-year growth in engagement."
          ]
        },
        {
          title: "International Student Recruitment Ambassador of Tianjin University",
          subtitle: "Recruitment Ambassador",
          period: "2022 - 2023",
          bullets: [
            "Supported Malaysia-focused recruitment initiatives with 20+ bilingual posters and 4 promotional videos.",
            "Managed Facebook and Instagram content distribution with 65,000+ total views and 40% engagement growth.",
            "Planned and hosted 'Unlocking TJU Majors' with 6 international speakers from Malaysia and China.",
            "Served as a core speaker for 'TJU Ambassador Talks' on biology programs and academic strengths."
          ]
        }
      ]
    },
    awards: {
      title: "Awards and Honors",
      items: [
        "Outstanding International Student Award (Second Prize), Tianjin University.",
        "Gold Medal and Best Improved Component Nominee, 2024 iGEM Competition - School of Life Sciences Team, Tianjin University.",
        "Silver Award, 14th Challenge Cup National Finals - Belt and Road International Invitational, China College Students Innovation and Entrepreneurship Competition.",
        "Provincial Third Prize, 9th National College Life Science Competition (Research Category) CULSC.",
        "First Prize, 3rd Kang Simpute Cup Basic Experimental Skills Competition in Life Sciences, Tianjin University.",
        "Featured on Tianjin University Global Official Website as representative Malaysian student during the 50th anniversary of China-Malaysia diplomatic relations."
      ]
    },
    contact: {
      title: "Contact",
      labels: {
        email: "Email",
        linkedin: "LinkedIn",
        github: "GitHub",
        whatsapp: "WhatsApp"
      },
      copy: "Copy Email",
      copied: "Copied!"
    },
    footer: {
      note: "Static site. Built with HTML, CSS, and Vanilla JavaScript."
    }
  },
  zh: {
    meta: {
      title: "MahamCodes | 个人主页"
    },
    controls: {
      langToggle: "English",
      themeToDark: "深色模式",
      themeToLight: "浅色模式"
    },
    hero: {
      brand: "MahamCodes",
      kicker: "个人作品集",
      title: "Clara Tan Pei Wei",
      subtitle: "生物科学专业毕业，具备 IVD/POCT 医疗行业国际业务拓展的实操经验。"
    },
    personal: {
      title: "个人信息",
      items: [
        { label: "姓名", value: "Clara Tan Pei Wei" },
        { label: "性别", value: "女" },
        { label: "国籍", value: "马来西亚" },
        { label: "院校", value: "天津大学（中国）" },
        { label: "学历", value: "学士" },
        { label: "专业", value: "生物科学" }
      ]
    },
    about: {
      title: "关于我",
      summary: "生物科学专业毕业，具备在中国学习与实践经历，并拥有 IVD/POCT 行业相关实操经验。熟悉中国医疗企业业务流程、本地市场环境以及跨部门沟通协作。擅长视觉内容制作，可熟练使用 Microsoft Word 与 PowerPoint 完成专业文档与产品展示。希望在医疗健康方向持续参与产品开发与全生命周期管理。"
    },
    experience: {
      title: "工作经历",
      items: [
        {
          title: "Xenta Biomedical Science Co. Ltd.",
          subtitle: "国际业务拓展 | 中国",
          period: "2025年7月 - 2026年1月",
          bullets: [
            "参与马来西亚、印度尼西亚、韩国、日本等市场的早期海外拓展。",
            "在马来西亚两个月派驻期间，独立完成医院与本地经销商走访。",
            "协助新客户开发、经销商沟通，以及产品咨询与资料跟进。",
            "参与印尼、韩国等国际展会及海外商务活动，并协助与日本合作方的跨境沟通。",
            "协助海外样品发运与物流协调，处理发往印尼的贸易与单证支持。"
          ]
        }
      ]
    },
    education: {
      title: "教育经历",
      items: [
        {
          title: "天津大学",
          subtitle: "生物科学学士 | 中国",
          period: "2021年9月 - 2025年7月",
          bullets: [
            "连续四年全额奖学金获得者。",
            "主修课程：普通生物学、生物化学、细胞生物学、病毒学、生理学、遗传学、微生物学、生物技术等。",
            "选修课程：科技创业与产品创新、财务会计数据解读与应用、可持续社会创业、工程项目投融资导论等。"
          ]
        }
      ]
    },
    activities: {
      title: "课外经历",
      items: [
        {
          title: "iGEM 2024 国际遗传工程机器大赛",
          subtitle: "实验组成员 | 天津大学生命科学学院",
          period: "2024 - 2025",
          bullets: [
            "参与 PET 塑料生物降解项目的实验设计与湿实验执行。",
            "负责 ICCG 酶表达系统的构建与优化。",
            "通过多轮工程循环与高通量筛选，累计完成 500+ 样本测试。",
            "团队获得 iGEM 金奖及 Best Improved Part 提名。"
          ]
        },
        {
          title: "天津马来西亚学生协会（MSAT）",
          subtitle: "副主席",
          period: "2023 - 2024",
          bullets: [
            "统筹 300+ 马来西亚留学生组织运营，覆盖多所高校及 5 个职能委员会。",
            "策划并执行 10 场大型活动，包括官方说明会和代表团交流活动。",
            "作为马中学生交流活动主要联络人，负责日程协调与现场执行。",
            "建立标准化活动流程、审批机制与沟通模板，提升执行效率与一致性。",
            "活动参与率达到 85%，成员活跃度同比增长 20%。"
          ]
        },
        {
          title: "天津大学国际招生大使",
          subtitle: "国际学生招募宣传",
          period: "2022 - 2023",
          bullets: [
            "负责马来西亚方向招生宣传，产出 20+ 份中英双语海报与 4 条宣传视频。",
            "管理 Facebook 和 Instagram 内容分发，总浏览量超过 65,000，互动增长 40%。",
            "策划并主持 “Unlocking TJU Majors” 旗舰活动，协调 6 位马中嘉宾分享。",
            "担任 “TJU Ambassador Talks” 核心主讲人，介绍生物学相关专业与学术优势。"
          ]
        }
      ]
    },
    awards: {
      title: "奖项与荣誉",
      items: [
        "天津大学优秀国际学生奖（二等奖）。",
        "2024 iGEM 国际遗传工程机器大赛金奖，Best Improved Component 提名（天津大学生命科学学院团队）。",
        "第十四届“挑战杯”全国总决赛“一带一路”国际邀请赛银奖，中国大学生创新创业竞赛。",
        "第九届全国大学生生命科学竞赛（研究类）省级三等奖（CULSC）。",
        "天津大学第三届“康新谱特杯”生命科学基础实验技能竞赛一等奖。",
        "在中马建交 50 周年期间，作为马来西亚学生代表被天津大学全球官网专题报道。"
      ]
    },
    contact: {
      title: "联系我",
      labels: {
        email: "邮箱",
        linkedin: "领英",
        github: "GitHub",
        whatsapp: "WhatsApp"
      },
      copy: "复制邮箱",
      copied: "已复制"
    },
    footer: {
      note: "纯静态网站，使用 HTML、CSS 与 Vanilla JavaScript 构建。"
    }
  }
};

const LANGUAGE_KEY = "portfolio-language";

function getFromPath(source, path) {
  return path.split(".").reduce((acc, key) => (acc ? acc[key] : undefined), source);
}

function getPreferredLanguage() {
  const savedLanguage = localStorage.getItem(LANGUAGE_KEY);
  if (savedLanguage && translations[savedLanguage]) return savedLanguage;
  return navigator.language.toLowerCase().startsWith("zh") ? "zh" : "en";
}

const i18nState = {
  currentLanguage: getPreferredLanguage()
};

function t(path) {
  const dictionary = translations[i18nState.currentLanguage] || translations.en;
  const value = getFromPath(dictionary, path);
  return typeof value === "string" ? value : path;
}

function getCurrentDictionary() {
  return translations[i18nState.currentLanguage] || translations.en;
}

function applyTranslations() {
  document.querySelectorAll("[data-i18n]").forEach((node) => {
    const key = node.getAttribute("data-i18n");
    const text = t(key);
    if (node.tagName === "TITLE") {
      document.title = text;
      return;
    }
    node.textContent = text;
  });
}

function updateLanguageButtonLabel() {
  const button = document.getElementById("lang-toggle");
  if (!button) return;
  button.textContent = t("controls.langToggle");
}

function setLanguage(language) {
  if (!translations[language]) return;
  i18nState.currentLanguage = language;
  localStorage.setItem(LANGUAGE_KEY, language);
  document.documentElement.lang = language;
  applyTranslations();
  updateLanguageButtonLabel();
  if (window.renderPortfolioContent) window.renderPortfolioContent();
  if (window.updateThemeButtonLabel) window.updateThemeButtonLabel();
}

function initLanguageToggle() {
  const button = document.getElementById("lang-toggle");
  if (!button) return;
  button.addEventListener("click", () => {
    const nextLanguage = i18nState.currentLanguage === "en" ? "zh" : "en";
    setLanguage(nextLanguage);
  });
}

window.PortfolioI18n = {
  translations,
  t,
  setLanguage,
  applyTranslations,
  initLanguageToggle,
  getCurrentDictionary,
  getLanguage: () => i18nState.currentLanguage
};
